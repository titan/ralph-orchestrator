# Ralph Orchestrator Configuration - OpenCode
# v2 nested format
#
# Requires:
# - `opencode` CLI installed (https://github.com/opencode-ai/opencode)
# - Configured provider credentials (ANTHROPIC_API_KEY, OPENAI_API_KEY, etc.)
#
# Note: opencode 1.1.30+ requires explicit model flag (-m) for reliable operation.
# Change the model below to your preferred provider/model combination.
# Run `opencode models` to see available options.

# Event loop settings
event_loop:
  completion_promise: "LOOP_COMPLETE"
  max_iterations: 100
  max_runtime_seconds: 14400           # 4 hours
  idle_timeout_secs: 1800

# CLI backend settings
# Using custom backend to specify model explicitly (required for opencode 1.1.30+)
cli:
  backend: "custom"
  command: "opencode"
  args:
    - "run"
    - "-m"
    - "anthropic/claude-sonnet-4-20250514"  # Change to your preferred model
  prompt_mode: "arg"

# Core behaviors (always injected into prompts)
core:
  specs_dir: "./specs/"
  guardrails:
    - "Fresh context each iteration - save learnings to memories for next time"
    - "Don't assume 'not implemented' - search first"
    - "Verification is mandatory - tests/typecheck/lint must pass"
